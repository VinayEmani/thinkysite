{% extends 'testapp/base.html' %}

<!-- Context is user, is_mod, thread, comment list -->
{% block title %}
    {{thread.title}}
{% endblock %}

{% block maincontent %}
<div class="container-fluid">
    <div class="row">
    </div>

    <div class="row">
        <div class="col-lg-12">
            <h3>{{ thread.title }}</h3>
        </div>
    </div>
    <br>
    <div class="row">
        <!-- Comment submission form. -->
        <div class="col-lg-6">
            <form action="/testapp/newcomment/?threadid={{thread.id}}"
                method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="comment-text-field">New comment</label>
                    <textarea name="commenttext" id="comment-text-field"
                        class="form-control"></textarea>
                </div>
                <button class="btn btn-info">
                    Submit
                </button>
            </form>
        </div>
    </div>

    <br><br>
    {% for comment in comments %}
        <div class="row panel panel-primary">
                <div class="panel-heading">
                </div>

                <div class="col-lg-12 panel-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-3">
                                #{{ forloop.counter|add:start }}<br>
                                <a href="/testapp/profile/?pid={{ comment.posted_by.id }}">{{ comment.posted_by.username }}</a>
                                <br>
                                {{ comment.post_date }} UTC
                            </div>

                            <div class="col-lg-6" style="vertical-align: center;">
                                {{ comment.text }}
                            </div>

                            <div class="col-lg-3">
                                {% ifequal user.id comment.posted_by.id %}
                                <button class="btn btn-info">
                                    Edit
                                </button>

                                <button class="btn btn-warning">
                                    Delete
                                </button>
                                {% else %}
                                <button class="btn btn-info">
                                    +
                                </button>

                                <button class="btn btn-warning">
                                    -
                                </button>
                                {% endifequal %}
                            </div>
                        </div>
                    </div>
                </div>
        </div>

        <!--<div class="col-lg-3">
        </div>

        <div class="col-lg-6">
        </div>

        <div class="col-lg-3">
        </div> -->
    {% endfor %}
</div>
{% endblock %}
